/* ------------------------------------------------------ */
/* recommendations.js — Tianji Five-Element Suggestions   */
/* ------------------------------------------------------ */


/* ------------------------------------------------------ */
/* 1. RECOMMENDATION DATA BANK                             */
/* ------------------------------------------------------ */

const RECS = {
  wood: {
    low: {
      title: "木不足｜疏泄弱",
      body: `
      • 轻量运动（散步 20–30 分钟）促进气机流动  
      • 少熬夜，减少连续紧绷的脑力消耗  
      • 安排早晨阳光暴露（10 分钟）帮助启动系统  
      • 多做横向伸展（肩胸打开姿势）  
      `
    },
    mid: {
      title: "木适中但有负担",
      body: `
      • 维持规律节奏，减少密集多工  
      • 情绪需要出口：写、说、散步都可以  
      • 工作期间安排“暂停 30 秒呼吸”  
      • 避免长时间屏住气、憋着情绪  
      `
    },
    high: {
      title: "木太过｜疏泄过强",
      body: `
      • 减少自己“推动自己”的行为（赶进度、急、躁）  
      • 做 5 分钟缓和下半身紧绷的拉伸  
      • 避免刺激性内容（争执、竞争）  
      • 多吃易消化的清淡食物，让系统降压  
      `
    }
  },

  fire: {
    low: {
      title: "火不足｜神明偏弱",
      body: `
      • 轻柔早晨暖身，让火气“点亮”  
      • 午间 15 分钟户外亮光  
      • 避免过度久坐  
      • 晚餐不要过冷，确保身体有舒适温度  
      `
    },
    mid: {
      title: "火适中但偏亮",
      body: `
      • 睡前减少蓝光，建立“关机”仪式  
      • 晚上不讨论压力话题  
      • 睡前洗温水澡让神经从“亮”转“暖”  
      • 练 4-6 慢呼吸（吸 4 秒 / 呼 6 秒）  
      `
    },
    high: {
      title: "火太过｜神经系统过亮",
      body: `
      • 避免高强度刺激（咖啡、酒、剧烈运动）  
      • 睡前做 5 分钟腹式呼吸  
      • 晚上屏幕亮度调到最低  
      • 若半夜醒来，不要刷手机，做慢呼吸即可  
      `
    }
  },

  earth: {
    low: {
      title: "土不足｜承载弱",
      body: `
      • 早餐摄取一点温热主食（燕麦／粥）增强承载力  
      • 饭后轻走 5–10 分钟  
      • 不要空腹久坐或长时间拖延吃饭  
      • 工作安排微区块化，避免过度消耗  
      `
    },
    mid: {
      title: "土适中但松散",
      body: `
      • 规律吃饭，不让血糖波动太大  
      • 一天固定几个补水点  
      • 避免 heavy meal 立即工作  
      • 维持卧室清爽、干净，提高恢复速度  
      `
    },
    high: {
      title: "土太过｜困、沉、黏",
      body: `
      • 减少高淀粉、高油食物  
      • 酌量增加运动，让能量“动起来”  
      • 每 1.5 小时站起来 1 分钟  
      • 避免过度白日睡眠  
      `
    }
  },

  metal: {
    low: {
      title: "金不足｜界限弱",
      body: `
      • 练习说“不”，减少消耗性社交  
      • 鼻呼吸训练（3 分钟）  
      • 每日 10 分钟整理空间（外界=内界）  
      • 留一点时间给独处  
      `
    },
    mid: {
      title: "金适中但干燥",
      body: `
      • 补水、适度润肺（水果、温水）  
      • 避免长期空调环境  
      • 外界界限不稳时：先暂停、深呼吸  
      • 做简单皮肤保湿  
      `
    },
    high: {
      title: "金太过｜敏感、脆弱",
      body: `
      • 减少信息输入量（IG、新闻）  
      • 鼻腔湿化、环境加湿  
      • 避免与消耗你的人过度接触  
      • 做胸部扩张呼吸练习（缓解金燥）  
      `
    }
  },

  water: {
    low: {
      title: "水不足｜底气弱",
      body: `
      • 增加睡眠时长（+30–60 分钟）  
      • 睡前减少刺激与过度思考  
      • 保持腰部温暖（blanket／热敷）  
      • 避免连续硬撑  
      `
    },
    mid: {
      title: "水适中但不稳",
      body: `
      • 固定休息点（身体喜欢规律）  
      • 让一天中出现几段“沉下来”的时间  
      • 避免长时间强咖啡  
      • 做轻松冥想（2–3 分钟即可）  
      `
    },
    high: {
      title: "水太过｜沉、冷、暗",
      body: `
      • 减少久坐，让水气被推动  
      • 增加轻度暖身运动  
      • 早晨拉开窗帘进光  
      • 避免夜晚过度补水（影响循环力）  
      `
    }
  }
};


/* ------------------------------------------------------ */
/* 2. RECOMMENDATION ENGINE                                */
/* ------------------------------------------------------ */

function generateRecommendations(scores) {
  const result = [];

  const elements = ["wood", "fire", "earth", "metal", "water"];

  elements.forEach(el => {
    const value = scores[el];

    let group;
    if (value <= 30) group = "low";
    else if (value <= 60) group = "mid";
    else group = "high";

    result.push({
      title: RECS[el][group].title,
      body: RECS[el][group].body
    });
  });

  return result;
}
